<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="asset/css/trangchhu.css"/>
    <title>Game cờ Caro của tam thái tử - Bắt đầu !</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #9ca3ae;
            margin: 0;
            padding: 50px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        
    </style>
</head>
<body>
    <div class="game-header">
        <h1>CARO TAM THÁI TỬ</h1>
        <div class="player-info" id="playerInfo"></div>
    </div>
    
    <div class="game-container">
        <div id="board"></div>
        <div class="controls">
            <button id="themeBtn">Đổi giao diện</button>
            <button id="resetBtn">Chơi lại</button>
            <button id="backBtn">Về trang chủ</button>
        </div>
    </div>

    <script>
        // Lấy thông tin từ localStorage
        const gameSettings = JSON.parse(localStorage.getItem('gameSettings'));
        const playerName = gameSettings?.player || "Người chơi";
        const boardSize = gameSettings?.size || 15;
        const gameMode = gameSettings?.mode || "human";
        
        // Khởi tạo biến game
        let currentPlayer = 'X';
        let gameActive = true;
        const board = document.getElementById('board');
        const playerInfo = document.getElementById('playerInfo');
        
        // Hiển thị thông tin người chơi
        playerInfo.textContent = `${playerName} - Chế độ: ${gameMode === 'human' ? '2 người' : 'Máy'}`;
        
        // Hàm tạo bàn cờ
        function createBoard(size) {
  board.innerHTML = ''; // xóa bàn cũ
  board.classList.remove('dark');
  board.classList.add('light');
  for (let row = 0; row < size; row++) {
    for (let col = 0; col < size; col++) {
      const cell = document.createElement('div');
      cell.className = 'cell';
      cell.style.display = 'inline-block';   // đứng cạnh nhau
      cell.style.width = '30px';
      cell.style.height = '30px';
      cell.style.border = '1px solid #aaa';
      cell.style.textAlign = 'center';
      cell.style.verticalAlign = 'middle';
      cell.style.lineHeight = '30px'; // căn giữa chữ X/O

      // click để đánh X/O
      cell.addEventListener('click', () => {
        if (!cell.textContent) {
          cell.textContent = currentPlayer;
            cell.classList.add(currentPlayer.toLowerCase());
          currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
        }
      });

      board.appendChild(cell);
    }
    // xuống dòng sau mỗi hàng
    board.appendChild(document.createElement('br'));
  }

  board.style.display = 'block';
}
        
        // Máy đánh (AI đơn giản)
        function computerMove() {
            const cells = document.querySelectorAll('.cell');
            const emptyCells = Array.from(cells).filter(cell => cell.textContent === '');
            
            if (emptyCells.length > 0) {
                const randomCell = emptyCells[Math.floor(Math.random() * emptyCells.length)];
                randomCell.textContent = 'O';
                randomCell.classList.add('o');
                
                if (checkWin()) {
                    setTimeout(() => {
                        alert('Máy thắng!');
                        gameActive = false;
                    }, 100);
                } else {
                    currentPlayer = 'X';
                }
            }
        }
        
        // Kiểm tra thắng thua (đơn giản - cần cải tiến)
        function checkWin() {
            // Triển khai logic kiểm tra thắng thua thực tế
            // Ở đây chỉ là placeholder
            return false;
        }
        
        // Sự kiện nút đổi giao diện
        document.getElementById('themeBtn').addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
        });
        
        // Sự kiện nút chơi lại
        document.getElementById('resetBtn').addEventListener('click', () => {
            currentPlayer = 'X';
            gameActive = true;
            createBoard(boardSize);
        });
        
        // Sự kiện nút về trang chủ
        document.getElementById('backBtn').addEventListener('click', () => {
            window.location.href = 'index.html';
        });
        
        // Khởi tạo game
        createBoard(boardSize);
    </script>
</body>
</html>